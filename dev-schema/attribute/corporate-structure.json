{
	"$id": "http://platform.selfkey.org/schema/attribute/corporate-structure.json",
	"$schema": "http://platform.selfkey.org/schema/identity-attribute.json",
	"identityAttribute": true,
	"system": true,
	"identityAttributeRepository": "http://platform.selfkey.org/repository.json",
	"entityType": ["corporate"],
	"title": "Corporate Structure",
	"type": "object",
	"properties": {
		"companyType": {
			"$ref": "http://platform.selfkey.org/schema/attribute/legal-entity-type.json"
		}
	},
	"dependencies": {
		"companyType": {
			"oneOf": [
				{
					"$ref": "#/definitions/ltd"
				},
				{
					"$ref": "#/definitions/llc"
				},
				{
					"$ref": "#/definitions/tst"
				},
				{
					"$ref": "#/definitions/fnd"
				},
				{
					"$ref": "#/definitions/llp"
				},
				{
					"$ref": "#/definitions/other_company"
				}
			]
		}
	},
	"definitions": {
		"equity": {
			"type": "number",
			"minimum": 0,
			"maximum": 100
		},
		"ltd": {
			"type": "object",
			"properties": {
				"companyType": {
					"enum": ["Company Limited by Shares (LTD)"]
				},
				"members": {
					"$ref": "#/definitions/members/ltd"
				}
			}
		},
		"llc": {
			"type": "object",
			"properties": {
				"companyType": {
					"enum": ["Limited Liability Company (LLC)"]
				},
				"members": {
					"$ref": "#/definitions/members/llc"
				}
			}
		},
		"tst": {
			"type": "object",
			"properties": {
				"companyType": {
					"enum": ["Trust (TST)"]
				},
				"members": {
					"$ref": "#/definitions/members/tst"
				}
			}
		},
		"fnd": {
			"type": "object",
			"properties": {
				"companyType": {
					"enum": ["Foundation (FND)"]
				},
				"members": {
					"$ref": "#/definitions/members/fnd"
				}
			}
		},
		"llp": {
			"type": "object",
			"properties": {
				"companyType": {
					"enum": ["Limited Partnership (LLP)"]
				},
				"members": {
					"$ref": "#/definitions/members/llp"
				}
			}
		},
		"other_company": {
			"type": "object",
			"properties": {
				"companyType": {
					"enum": ["Other"]
				},
				"members": {
					"$ref": "#/definitions/members/other_company"
				}
			}
		},
		"members": {
			"ltd": {
				"type": "array",
				"items": {
					"type": "object",
					"properties": {
						"positions": {
							"type": "array",
							"items": {
								"$ref": "#/definitions/positions/ltd"
							}
						},
						"entity": {
							"$ref": "#/definitions/entities/entity"
						}
					}
				}
			},
			"llc": {
				"type": "array",
				"items": {
					"type": "object",
					"properties": {
						"positions": {
							"type": "array",
							"items": {
								"$ref": "#/definitions/positions/llc"
							}
						},
						"entity": {
							"$ref": "#/definitions/entities/entity"
						}
					}
				}
			},
			"tst": {
				"type": "array",
				"items": {
					"type": "object",
					"properties": {
						"positions": {
							"type": "array",
							"items": {
								"$ref": "#/definitions/positions/tst"
							}
						},
						"entity": {
							"$ref": "#/definitions/entities/entity"
						}
					}
				}
			},
			"fnd": {
				"type": "array",
				"items": {
					"type": "object",
					"properties": {
						"positions": {
							"type": "array",
							"items": {
								"$ref": "#/definitions/positions/fnd"
							}
						},
						"entity": {
							"$ref": "#/definitions/entities/entity"
						}
					}
				}
			},
			"llp": {
				"type": "array",
				"items": {
					"type": "object",
					"properties": {
						"positions": {
							"type": "array",
							"items": {
								"$ref": "#/definitions/positions/ltd"
							}
						},
						"entity": {
							"$ref": "#/definitions/entities/entity"
						}
					}
				}
			},
			"other_company": {
				"type": "array",
				"items": {
					"type": "object",
					"properties": {
						"positions": {
							"type": "array",
							"items": {
								"$ref": "#/definitions/positions/other_company"
							}
						},
						"entity": {
							"$ref": "#/definitions/entities/entity"
						}
					}
				}
			}
		},
		"positions": {
			"ltd": {
				"type": "object",
				"oneOf": [
					{ "$ref": "#/definitions/positions/director" },
					{ "$ref": "#/definitions/positions/shareholder" },
					{ "$ref": "#/definitions/positions/ubo" },
					{ "$ref": "#/definitions/positions/observer" },
					{ "$ref": "#/definitions/positions/authorizedSignatory" }
				]
			},
			"llc": {
				"oneOf": [
					{ "$ref": "#/definitions/positions/manager" },
					{ "$ref": "#/definitions/positions/member" },
					{ "$ref": "#/definitions/positions/ubo" },
					{ "$ref": "#/definitions/positions/observer" },
					{ "$ref": "#/definitions/positions/authorizedSignatory" }
				]
			},
			"tst": {
				"oneOf": [
					{ "$ref": "#/definitions/positions/grantor" },
					{ "$ref": "#/definitions/positions/beneficiary" },
					{ "$ref": "#/definitions/positions/trustee" },
					{ "$ref": "#/definitions/positions/protector" },
					{ "$ref": "#/definitions/positions/ubo" },
					{ "$ref": "#/definitions/positions/observer" },
					{ "$ref": "#/definitions/positions/authorizedSignatory" }
				]
			},
			"fnd": {
				"oneOf": [
					{ "$ref": "#/definitions/positions/founder" },
					{ "$ref": "#/definitions/positions/director" },
					{ "$ref": "#/definitions/positions/supervisor" },
					{ "$ref": "#/definitions/positions/beneficiary" },
					{ "$ref": "#/definitions/positions/ubo" },
					{ "$ref": "#/definitions/positions/observer" },
					{ "$ref": "#/definitions/positions/authorizedSignatory" }
				]
			},
			"llp": {
				"oneOf": [
					{ "$ref": "#/definitions/positions/generalPartner" },
					{ "$ref": "#/definitions/positions/limitedPartner" },
					{ "$ref": "#/definitions/positions/ubo" },
					{ "$ref": "#/definitions/positions/observer" },
					{ "$ref": "#/definitions/positions/authorizedSignatory" }
				]
			},
			"other_company": {
				"oneOf": [
					{ "$ref": "#/definitions/positions/member" },
					{ "$ref": "#/definitions/positions/ubo" },
					{ "$ref": "#/definitions/positions/observer" },
					{ "$ref": "#/definitions/positions/authorizedSignatory" }
				]
			},
			"director": {
				"type": "object",
				"properties": {
					"position": {
						"const": "director"
					}
				}
			},
			"ubo": {
				"type": "object",
				"properties": {
					"position": {
						"const": "ubo"
					}
				}
			},
			"observer": {
				"type": "object",
				"properties": {
					"position": {
						"const": "observer"
					}
				}
			},
			"authorizedSignatory": {
				"type": "object",
				"properties": {
					"position": {
						"const": "authorizedSignatory"
					}
				}
			},
			"shareholder": {
				"type": "object",
				"properties": {
					"position": {
						"const": "shareholder"
					},
					"equity": {
						"title": "Shares",
						"$ref": "#/definitions/equity"
					}
				}
			},
			"member": {
				"type": "object",
				"properties": {
					"position": {
						"const": "member"
					},
					"equity": {
						"title": "Membership Interest",
						"$ref": "#/definitions/equity"
					}
				}
			},
			"manager": {
				"type": "object",
				"properties": {
					"position": {
						"const": "manager"
					}
				}
			},
			"grantor": {
				"type": "object",
				"properties": {
					"position": {
						"const": "grantor"
					}
				}
			},
			"beneficiary": {
				"type": "object",
				"properties": {
					"position": {
						"const": "beneficiary"
					}
				}
			},
			"trustee": {
				"type": "object",
				"properties": {
					"position": {
						"const": "trustee"
					}
				}
			},
			"protector": {
				"type": "object",
				"properties": {
					"position": {
						"const": "protector"
					}
				}
			},
			"founder": {
				"type": "object",
				"properties": {
					"position": {
						"const": "founder"
					}
				}
			},
			"supervisor": {
				"type": "object",
				"properties": {
					"position": {
						"const": "protector"
					}
				}
			},
			"generalPartner": {
				"type": "object",
				"properties": {
					"position": {
						"const": "general-partner"
					},
					"equity": {
						"$ref": "#/definitions/equity"
					}
				}
			},
			"limitedPartner": {
				"type": "object",
				"properties": {
					"position": {
						"const": "limited-partner"
					},
					"equity": {
						"$ref": "#/definitions/equity"
					}
				}
			}
		},
		"entities": {
			"entity": {
				"oneOf": [
					{
						"$ref": "#/definitions/entities/individual"
					},
					{
						"$ref": "#/definitions/entities/corporate"
					}
				]
			},

			"individual": {
				"type": "object",
				"properties": {
					"type": {
						"const": "individual"
					},
					"firstName": {
						"$ref": "http://platform.selfkey.org/schema/attribute/first-name.json"
					},
					"lastName": {
						"$ref": "http://platform.selfkey.org/schema/attribute/last-name.json"
					},
					"email": {
						"$ref": "http://platform.selfkey.org/schema/attribute/email.json"
					}
				}
			},
			"corporate": {
				"type": "object",
				"properties": {
					"type": {
						"const": "corporate"
					},
					"companyType": {
						"$ref": "http://platform.selfkey.org/schema/attribute/legal-entity-type.json"
					},
					"companyName": {
						"$ref": "http://platform.selfkey.org/schema/attribute/company-name.json"
					},
					"email": {
						"$ref": "http://platform.selfkey.org/schema/attribute/email.json"
					}
				}
			}
		}
	},
	"required": []
}
